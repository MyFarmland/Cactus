@{
    Layout = null;
    var user = ViewData["LoginUser"] as Cactus.Model.Sys.User;
}

<div class="tool-list">
    <div class="pure-button-group">
        @*<a href="javascript:;" onclick="Admin.loadContent_Jq('main-content', '/Admin/Root/CenterUser');" class="pure-button pure-button-primary">返回</a>*@
        <a href="javascript:;" onclick="Admin.loadBackPage('main-content');" class="pure-button pure-button-primary">返回</a>
    </div>
</div>
<form class="pure-form  pure-form-aligned" id="infoForm">
    <fieldset>
        <legend>修改个人资料</legend>
        <div class="pure-control-group">
            <label>昵称</label>
            <input name="NickName" type="text" value="@user.NickName" placeholder="昵称" />
        </div>

        <div class="pure-control-group">
            <label>邮箱</label>
            <input name="Email" type="text" value="@user.Email" placeholder="邮箱" />
        </div>
        <div class="pure-control-group">
            <label>手机号码</label>
            <input name="Phone" type="text" value="@user.Phone" placeholder="手机号码" />
        </div>
        <div class="pure-control-group">
            <label>QQ号</label>
            <input name="Qq" type="text" value="@user.Qq" placeholder="QQ号" />
        </div>

        <div class="pure-controls">
            <button type="button" class="pure-button pure-button-primary" name="saveInfo">保存</button>
        </div>
    </fieldset>
</form>

<script type="text/javascript">
    $(function () {

        $('button[name=saveInfo]').bind('click', function () {
            var param = $("#infoForm").serialize();
            $.ajax({
                url: "/Admin/Root/CenterAlterInfo",
                type: "post",
                dataType: "json",
                data: param,
                success: function (obj) {
                    if (obj.pass) {
                        Admin.loadContent_Jq('main-content', '/Admin/Root/CenterUser');
                    } else {
                        layer.alert(obj.msg)
                    }
                }
            });
        });
    })
</script>

